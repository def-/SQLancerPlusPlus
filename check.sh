#!/bin/bash
grep -r "Found" logs/*
grep -r "The size of the result sets mismatch" logs/*
grep "ERROR" logs/*/*.log | grep -v -P "^(?!.*panic).*not yet supported" | grep -v "does not exist" | grep -v "must have" | grep -v overflow | grep -v "invalid input" | grep -v "cannot be matched" | grep -v "implicitly casting" | grep -v "is not unique" | grep -v "invalid digit" | grep -v "is not defined" | grep -v "is defined" | grep -v "unterminated" | grep -v "Expected " | grep -v "Can't union types" | grep -v "type error in known global id" | grep -v "is out of range" | grep -v "of a negative" | grep -v "does not support" | grep -v "ANALYZE" | grep -v "is of type" | grep -v "must appear in the" | grep -v "negative substring length" | grep -v "is ambiguous" | grep -v "out of range" | grep -v "division by zero" | grep -v "is only defined for finite" | grep -v "cannot canonicalize predicates that are not of type" | grep -v "unexpected character in input" | grep -v "could not determine polymorphic type" | grep -v "cannot reference pseudo type" | grep -v "string is not a valid identifier" | grep -v "invalid regular expression" | grep -v " violates not-null constraint" | grep -v "could not convert type" | grep -v  "are not allowed" | grep -v "requires a record" | grep -v "unrecognized privilege type" | grep -v  "cannot cast" | grep -v "requires an OVER" | grep -v "value too long" | grep -v "may only refer to user-defined" | grep -v "cannot materialize call to" | grep -v "invalid hash algorithm" | grep -v "expected id" | grep -v "expected exactly one statement" | grep -v "regex parse error" | grep -v "invalid encoding name" | grep -v "must specify at least one capture group" | grep -v "requires a string literal" | grep -v "too large for encoding" | grep -v "must be a positive integer" | grep -v "bound must be less than" | grep -v "not recognized" | grep -v "invalid escape string" | grep -v "canceling statement due to statement timeout" | grep -v "invalid time zone" | grep -v "result exceeds max size" | grep -v "calls to mz_now in write statements" | grep -v "out of valid range" | grep -v "equivalence class members have different scalar types" | grep -v "Datum::unwrap_dict called on String" | grep -v "Datum::unwrap_range called on String" | grep -v "more than one record produced in subquery" | grep -v "input of anonymous composite types is not implemented" | grep -v "lists must all be the same length" | grep -v "invalid IANA Time Zone Database identifier" | grep -v "unknown schema" | grep -v "octal escapes are not supported" | grep -v "attempt to create relation with too many columns" | grep -v "column notation applied to type text" | grep -v "Unexpected EOF" | grep -v "missing required exponent" | grep -v "invalid unicode escape" | grep -v "dimension array or low bound array must not be null" | grep -v "internal error: internal error in optimizer: internal transform error: scalar types do not match" | grep -v "LIKE pattern exceeds maximum length" | grep -v "cannot return complex numbers" | grep -v "must be greater than zero" | grep -v "invalid datepart" | grep -v "null character not permitted" | grep -v "expressions must appear in select list"
docker logs materialized | grep ERROR | grep -v "detected a loop" | grep -v "caught a panic during query optimization" | grep -v INFO | grep -v "Undefined join of non-equal base types" | grep -v "failed writing row to mz_aws_connections" | grep -v "performed work after" | grep -v "cannot load unknown" | grep -v "**** WARNING ****" | grep -v "error handling connection: Broken pipe" | grep -v "pubsub connection err" | grep -v "relaunching in " | grep -v "failed to serve internal_http" | grep -v "Optimizer::optimize(): internal transform error: scalar types do not match"
docker logs materialized | grep panicked | grep -v "overflowing.rs"
