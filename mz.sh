#!/bin/bash
docker stop materialized
docker rm materialized
docker run -it -d --name materialized -p 127.0.0.1:6874-6878:6874-6878 -e MZ_RESTART_ON_FAILURE=1 -e MZ_NO_TELEMETRY=1 -e MZ_NO_BUILTIN_CONSOLE=1 -e MZ_TEST_ONLY_DUMMY_SEGMENT_CLIENT=true -e MZ_SOFT_ASSERTIONS=1 -e MZ_NO_EXTERNAL_CLUSTERD= -e 'MZ_SYSTEM_PARAMETER_DEFAULT=unsafe_enable_unsafe_functions=true;allow_real_time_recency=true;constraint_based_timestamp_selection=verify;enable_compute_peek_response_stash=true;enable_0dt_deployment_panic_after_timeout=true;enable_0dt_deployment_sources=true;enable_alter_swap=true;enable_cast_elimination=false;enable_columnar_lgalloc=false;enable_columnation_lgalloc=false;enable_compute_correction_v2=true;enable_compute_logical_backpressure=true;enable_connection_validation_syntax=true;enable_continual_task_create=true;enable_continual_task_retain=true;enable_continual_task_transform=true;enable_copy_to_expr=true;enable_create_table_from_source=true;enable_eager_delta_joins=true;enable_envelope_debezium_in_subscribe=true;enable_expressions_in_limit_syntax=true;enable_iceberg_sink=true;enable_introspection_subscribes=true;enable_kafka_sink_partition_by=true;enable_lgalloc=false;enable_load_generator_counter=true;enable_logical_compaction_window=true;enable_multi_worker_storage_persist_sink=true;enable_multi_replica_sources=true;enable_rbac_checks=true;enable_reduce_mfp_fusion=true;enable_refresh_every_mvs=true;enable_replacement_materialized_views=true;enable_cluster_schedule_refresh=true;enable_sql_server_source=true;enable_s3_tables_region_check=false;enable_statement_lifecycle_logging=true;enable_compute_temporal_bucketing=true;enable_variadic_left_join_lowering=true;enable_worker_core_affinity=true;grpc_client_http2_keep_alive_timeout=5s;ore_overflowing_behavior=ignore;unsafe_enable_table_keys=false;with_0dt_deployment_max_wait=1800s;persist_next_listen_batch_retryer_clamp=16s;persist_next_listen_batch_retryer_initial_backoff=100ms;persist_next_listen_batch_retryer_fixed_sleep=1200ms;persist_enable_arrow_lgalloc_noncc_sizes=true;persist_enable_s3_lgalloc_noncc_sizes=true;compute_dataflow_max_inflight_bytes=134217728;compute_hydration_concurrency=2;compute_replica_expiration_offset=3d;compute_apply_column_demands=true;compute_peek_response_stash_threshold_bytes=1048576;compute_subscribe_snapshot_optimization=true;enable_password_auth=true;enable_frontend_peek_sequencing=true;kafka_default_metadata_fetch_interval=1s;mysql_offset_known_interval=1s;force_source_table_syntax=false;persist_batch_columnar_format=structured;persist_batch_delete_enabled=true;persist_batch_structured_order=true;persist_batch_builder_structured=true;persist_batch_structured_key_lower_len=256;persist_batch_max_run_len=4;persist_catalog_force_compaction_fuel=1024;persist_catalog_force_compaction_wait=1s;persist_encoding_enable_dictionary=true;persist_stats_audit_percent=100;persist_stats_audit_panic=true;persist_fast_path_limit=1000;persist_fast_path_order=true;persist_gc_use_active_gc=true;persist_gc_min_versions=16;persist_gc_max_versions=128000;persist_inline_writes_single_max_bytes=4096;persist_inline_writes_total_max_bytes=1048576;persist_pubsub_client_enabled=true;persist_pubsub_push_diff_enabled=true;persist_record_compactions=true;persist_record_schema_id=true;persist_rollup_use_active_rollup=true;persist_blob_target_size=16777216;persist_compaction_memory_bound_bytes=83886080;persist_enable_incremental_compaction=true;persist_use_critical_since_catalog=true;persist_use_critical_since_snapshot=false;persist_use_critical_since_source=false;persist_part_decode_format=arrow;persist_blob_cache_scale_with_threads=true;persist_validate_part_bounds_on_read=false;persist_validate_part_bounds_on_write=false;pg_offset_known_interval=1s;statement_logging_default_sample_rate=1.0;statement_logging_max_data_credit=;statement_logging_max_sample_rate=1.0;statement_logging_target_data_rate=;storage_reclock_to_latest=true;storage_source_decode_fuel=100000;storage_statistics_collection_interval=1000;storage_statistics_interval=2000;storage_use_continual_feedback_upsert=true;sql_server_offset_known_interval=1s;default_cluster_replication_factor=1;enable_alter_table_add_column=true;enable_statement_lifecycle_logging=false;enable_internal_statement_logging=false;statement_logging_default_sample_rate=0;statement_logging_max_sample_rate=0;enable_repeat_row=true;enable_list_length_max=true;enable_list_n_layers=true;enable_time_at_time_zone=true;enable_date_bin_hopping=true' -e MZ_EAT_MY_DATA=1 materialize/materialized:v26.10.0-dev.0--pr.g0afe72c74c7d08ca088d2d8f3561d3669e3fc988 --unsafe-mode --orchestrator-process-propagate-crashes
